machine:
  environment:
    PATH: "~/$CIRCLE_PROJECT_REPONAME/gradle-2.9/bin:$PATH"
    TERM: "dumb"
    ADB_INSTALL_TIMEOUT: "10"
    GRADLE_OPTS: '-Dorg.gradle.jvmargs="-Xmx2048m -XX:+HeapDumpOnOutOfMemoryError"'
    
test:
  override:
      - sudo apt-get update
      - sudo sed -i 's/us-east-1\.ec2\.//g' /etc/apt/sources.list
      - sudo apt-get install build-essential curl git python-setuptools ruby perl
      - echo y | ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/linuxbrew/go/install)"
      - sudo apt-get install build-essential
      - cd "$(/home/ubuntu/.linuxbrew/bin/brew --repository)" && git fetch && git reset --hard origin/master
      - /home/ubuntu/.linuxbrew/bin/brew update
      - /home/ubuntu/.linuxbrew/bin/brew update
      - /home/ubuntu/.linuxbrew/bin/brew config
      - /home/ubuntu/.linuxbrew/bin/brew install -v node
      - /home/ubuntu/.linuxbrew/bin/brew link node
      - /home/ubuntu/.linuxbrew/bin/brew upgrade node
      #- sudo apt-get remove nodejs
      #- sudo apt-get remove npm
      - wget "https://nodejs.org/download/release/node-v0.6.9.tar.gz"
      - ls -al
      - tar -xvf node-v0.6.9.tar.gz
      - ls -al node-v0.6.9
      - export PATH=$PATH:`pwd`/node-v0.6.9/bin ; sudo npm install -g appium ; appium
      - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash
      - npm install -g appium
      - ls -al /home/ubuntu/.npm/appium
